#предаолагаем, что все предикат транзитивны
#чтобы код работал правильно -- его надо правлино писать (зашиты от дурака нет)
#ввод изначальных фактов
P('a1')
P('a2')
P('a3')
P('a4')
Q('a1','a1')
Q('a1','a2')
#проверяем на не симметричность
?Q('a2','a1')
Q('a2','a3')
Q('a4','a1')
?Q('a3','a3')
exists(x,y : Q(x,y)) -> Q(y,x)
exists(x: Q(x,x)) -> R(x)
#проверка отработки exists
?P('a1')
?P('a5')
?Q('a2','a1')
?R('a3')
?R('a1')
?Q('a3','a3')